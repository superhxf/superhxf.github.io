# NGINX介绍

## 1、NGINX介绍

​	*Nginx* (engine x) 是一个高性能的[HTTP](https://baike.baidu.com/item/HTTP)和[反向代理](https://baike.baidu.com/item/反向代理/7793488)web服务器，同时也提供了IMAP/POP3/SMTP[服务](https://baike.baidu.com/item/服务/100571)。

   以事件驱动的方式编写，性能很好，也是一个高效的反向代理和负载均衡器。

​    NGINX的特点：

1. 处理静态资源，自动索引。
2. 无缓存的反响代理加速
3. 简单的负载均衡和容器
4. 模块化的结构
5. 邮件代理

 学习网站：<http://www.nginx.cn/doc/index.html>

## 2、NGINX的使用场景

### 2.1、什么是反向代理和正向代理

​	   所谓正向代理就是顺着请求的方向进行的代理，即代理服务器他是由你配置为你服务，去请求目标服务器地址。比如我们要去访问谷歌网站，我们直接访问不通，那么我们就可以找一个代理服务器为我们服务，我们通过代理服务器请求到谷歌网站。

​	所谓反向代理正好与正向代理相反，代理服务器是为目标服务器服务的，虽然整体的请求返回路线都是一样的都是Client到Proxy到Server，可以通过统一流量入口到各个服务端。

### 2.2、负载均衡

​		三种负载策略

​        1、默认轮训

​        2、权重负载 

​        3、hash算法（ip_hash）

### 2.3、动静分离

​		  location 中使用正则的方式定义静态资源拦截路由到其他的地方去获取。

​        使用upstream 和 代理去访问其他服务器上存放的静态资源，例如互联网的百度，阿里按照区域去划分静态资源存放路径。

### 2.4、缓存设置



### 2.5、压缩设置

 针对服务器资源确实比较大的，进行压缩，减少网络传输，提升页面渲染效率。

NGINX默认使用的压缩方法gzip。

浏览器默认会携带解压缩功能，这样就能配合起来。

### 2.6、防盗链场景

只运行某些服务器地址可以访问静态资源，其他的全部拦截返回404。

## 3、NGINX在性能方面的优化操作

1. 使用OS的特有API
2. 使用长连接代替短连接
3. 使用压缩算法增加相同吞吐量的信息携带量
4. 使用缓存减少网络交互次数
5. ...

## 4、NGINC的模块化设计

1. 提供高度配置的模块接口，所有的模块都遵循统一规范设计模块。
2. 提供了配置模块，定义配置类型，所有的模块用配置项来为核心模块提供功能。
3. 提供了六个核心模块简化模块接口
4. 提供了五个类型模块，核心模块，配置模块，事件模块，HTTP模块，mail模块。
5. 采用完全的事件驱动来处理业务。

## 5、NGINX的模型

### 5.1、NGINX的模块模型

### 5.2、NGINX的事件驱动模型

### 5.3、NGINX的进程模型

1. 使用多核CPU的并发处理能力。
2. 负载均衡，多个worker工作进程通过进程间调用实现负载均衡。
3. master监控工作进程状态，管理其行为。

## 6、NGINX配置文件详解

全局配置块

事件配置块

HTTP配置块

​	http全局

​    server块 --虚拟主机 location块（ng的静态资源）

## 7、NGINX的高可用

策略是整合keepalived实现高可用方案。

<u>keepalived：轻量级的高可用解决方案,早期是LVS的四层网络负载设计来管理各个节点状态。</u>

